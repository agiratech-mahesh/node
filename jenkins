pipeline {
    agent any 
    stages {
        stage('Verify') {
            steps {
                sh '''
                    docker version
                    docker-compose version
                '''
            }
        }
            stage('npm') {
                steps {
                    sh ' npm install'
                }
            }
             stage('build') {
                steps {
                    sh ' docker-compose build '
                 }
              } 
             stage('docker compose') {
                steps {
                    sh 'docker-compose up -d -y '
                }
            }
            stage('pushing to dockerhub') {
               steps {
                 sh ' docker login -u maheshagiratech '
                 sh ' docker tag node_node maheshagiratech/nodejs'
                 sh ' docker push maheshagiratech/nodejs '
                 }
              }
        }
    }

