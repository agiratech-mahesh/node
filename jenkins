pipeline {
    agent any 
    stages {
        stage('Verify') {
            steps {
                sh '''
                    docker version
                    docker-compose version
                '''
            }
        }
            stage('npm') {
                steps {
                    sh ' npm install'
                }
            }
             stage('build') {
                steps {
                    sh ' docker-compose build '
                 }
              } 
             stage('docker compose') {
                steps {
                    sh 'docker-compose up -d '
                }
            }
            stage('pushing to dockerhub') {
               steps {
                 sh ' docker tag node_node maheshagiratech/nodejs'
                 sh 'echo $DOCKERHUB_CREDENTIALS_PSW | docker login -u $DOCKERHUB_CREDENTIALS_USR -- maheshagiratech password- b4d9225a-ad62-4567-bcd5-33d006043371 '
                 sh ' docker push maheshagiratech/nodejs:latest '
                 }
              }
        }
    }

